<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ•¸å­—åˆ†è§£ç·´ç¿’ï½œKidsLab</title>

<link rel="stylesheet" href="../KidsLabTheme.css">
<link rel="preload" as="font" href="../BpmfIansui-Regular.ttf" type="font/ttf" crossorigin>
</head>

<body>
  <nav class="top-nav light">
    <a href="../index.html">ğŸ  é¦–é </a>
    <a href="../DailyTask/">ğŸ¯ æ¯æ—¥ä»»å‹™</a>
    <a href="../ZhuyinPractice/">ã„…ã„†ã„‡ æ³¨éŸ³ç·´ç¿’</a>
    <a href="../MathPractice/split-practice.html" class="active">ğŸ”¢ æ•¸å­—åˆ†è§£ç·´ç¿’</a>
  </nav>

  <h1>ğŸ”¢ æ•¸å­—åˆ†è§£ç·´ç¿’</h1>
  <div id="subtitle">ä¸€å¹´ç´šï½œ10 ä»¥å…§</div>

  <div id="toolbar">
    <button class="btn" id="checkBtn">âœ… ç¢ºèªç­”æ¡ˆ</button>
    <button class="btn btn-ghost" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
  </div>

  <div id="problem">â€”</div>
  <div id="knownRow"></div>

  <div class="tray">
    <div class="trayTitle">æŠŠåœ“é»æ‹–åˆ°é€™è£¡ âœ ç­”æ¡ˆæ¡†</div>
    <div id="drop"></div>
  </div>

  <div class="tray">
    <div class="trayTitle">å¯æ‹–æ›³çš„åœ“é»</div>
    <div id="pool" class="center-wrap"></div>
  </div>

  <div id="feedback"></div>
  <div id="stats">å®Œæˆé¡Œæ•¸ï¼š0ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š0</div>

  <footer>Â© 2025 KidsLab Â· Created with â¤ï¸ by ZTing</footer>

  <script>
    // ä¿ç•™åŠŸèƒ½ä¸è®Š
    let target=0, known=0, answer=0, correctCount=0, wrongCount=0;
    const problem=document.getElementById('problem');
    const knownRow=document.getElementById('knownRow');
    const pool=document.getElementById('pool');
    const drop=document.getElementById('drop');
    const feedback=document.getElementById('feedback');
    const stats=document.getElementById('stats');
    const nextBtn=document.getElementById('nextBtn');
    const checkBtn=document.getElementById('checkBtn');
    const randInt=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
    const updateStats=()=>{stats.textContent=`å®Œæˆé¡Œæ•¸ï¼š${correctCount}ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š${wrongCount}`;};

    function newQuestion(){
      feedback.textContent=''; drop.innerHTML=''; pool.innerHTML=''; knownRow.innerHTML='';
      target=randInt(2,10); const a=randInt(1,target-1);
      known=Math.random()<0.5?a:target-a; answer=target-known;
      const leftBox=Math.random()<0.5;
      problem.textContent = leftBox ? `${target} â†’ â˜ + ${known}` : `${target} â†’ ${known} + â˜`;
      for(let i=0;i<known;i++) knownRow.appendChild(makeDot(false));
      const poolCount=Math.max(10, answer); for(let i=0;i<poolCount;i++) pool.appendChild(makeDot(true));
    }

    function makeDot(draggable){
      const d=document.createElement('div'); d.className='dot';
      if(!draggable) return d;
      let startX=0,startY=0,ghost=null;
      const onPointerDown=(e)=>{e.preventDefault();const rect=d.getBoundingClientRect();
        startX=e.clientX-rect.left;startY=e.clientY-rect.top;
        ghost=d.cloneNode(true);ghost.style.position='fixed';ghost.style.left=rect.left+'px';ghost.style.top=rect.top+'px';
        ghost.style.pointerEvents='none';ghost.classList.add('dragging');document.body.appendChild(ghost);
        document.addEventListener('pointermove',onMove);document.addEventListener('pointerup',onUp,{once:true});};
      const onMove=(e)=>{if(!ghost)return;ghost.style.left=(e.clientX-startX)+'px';ghost.style.top=(e.clientY-startY)+'px';};
      const onUp=(e)=>{document.removeEventListener('pointermove',onMove);if(!ghost)return;
        const r=drop.getBoundingClientRect();const x=e.clientX,y=e.clientY;const inDrop=(x>=r.left&&x<=r.right&&y>=r.top&&y<=r.bottom);
        ghost.remove();ghost=null;if(inDrop){drop.appendChild(simpleDot());}};
      d.addEventListener('pointerdown',onPointerDown);return d;
    }

    function simpleDot(){
      const d=document.createElement('div');d.className='dot';d.style.cursor='pointer';
      d.title='é»ä¸€ä¸‹ç§»å›ä¸‹æ–¹åœ“é»å€';d.addEventListener('click',()=>{pool.appendChild(makeDot(true));d.remove();});
      return d;
    }

    function checkAnswer(){
      const count=drop.children.length;
      if(count===answer){feedback.style.color='var(--ok)';feedback.textContent='âœ… ç­”å°äº†ï¼';correctCount++;updateStats();setTimeout(newQuestion,1200);}
      else{feedback.style.color='var(--no)';feedback.textContent='âŒ å†è©¦ä¸€æ¬¡';wrongCount++;updateStats();}
    }

    nextBtn.addEventListener('click',newQuestion);
    checkBtn.addEventListener('click',checkAnswer);
    updateStats(); newQuestion();
  </script>
</body>
</html>
