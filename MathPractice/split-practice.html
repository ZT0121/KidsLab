<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ•¸å­—åˆ†è§£</title>

<!-- åŒå±¤æ”¾ç½®å­—é«”æª”ï¼šBpmfIansui-Regular.ttf -->
<link rel="preload" as="font" href="BpmfIansui-Regular.ttf" type="font/ttf" crossorigin>

<style>
  /* å­—é«”è¨­å®š */
  @font-face {
    font-family: 'BpmfIansui';
    src: url('BpmfIansui-Regular.ttf') format('truetype');
    font-display: swap;
  }

  :root{
    --blue1:#3B82F6; /* å¤©è— */
    --blue2:#2563EB; /* æ·±è— */
    --ink:#1A365D;   /* å…§æ–‡å­—è‰² */
    --title:#1E40AF; /* æ¨™é¡Œè‰² */
    --ok:#059669;    /* æˆåŠŸ */
    --no:#DC2626;    /* å¤±æ•— */
  }

  /* è—è‰²ä¸»é¡ŒèƒŒæ™¯èˆ‡å…¨åŸŸå­—é«” */
  body{
    font-family:'BpmfIansui',"Noto Sans TC",sans-serif;
    background:linear-gradient(180deg,#E6F0FF 0%,#F7FAFF 100%);
    color:var(--ink);
    text-align:center;
    margin:0; padding:20px;
  }

  h1{ color:var(--title); margin:0 0 10px; text-shadow:1px 1px 2px rgba(0,0,0,0.05);} 
  #subtitle{ color:var(--blue2); margin:6px 0 14px; font-weight:700; }

  /* å…±ç”¨æŒ‰éˆ•æ¨£å¼ï¼ˆèˆ‡æ³¨éŸ³ç‰ˆä¸€è‡´ï¼‰ */
  .btn{
    font-family:'BpmfIansui','Noto Sans TC',sans-serif !important;
    font-size:22px; padding:10px 16px; border-radius:12px; border:none; color:#fff;
    background:linear-gradient(145deg,var(--blue1),var(--blue2)); cursor:pointer;
    box-shadow:0 4px 10px rgba(37,99,235,0.3); transition:transform .1s, box-shadow .2s;
  }
  .btn:hover{ transform:translateY(-2px); box-shadow:0 6px 14px rgba(37,99,235,0.4); }
  .btn-ghost{ background:#fff; border:2px solid var(--blue1); color:var(--title); box-shadow:none; }
  .btn-ghost:hover{ background:#DBEAFE; }

  #toolbar{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin:10px 0 16px; }

  /* é¡Œé¢èˆ‡è¦–è¦ºå€ */
  #problem{ font-size:40px; font-weight:800; margin:10px 0 6px; }
  #knownRow{ display:flex; justify-content:center; gap:8px; margin:6px 0 12px; }
  .dot{ width:28px; height:28px; border-radius:50%; background:var(--blue1); box-shadow:0 1px 0 rgba(0,0,0,.08); }

  .tray{ background:#F0F5FF; border:2px dashed #BFDBFE; border-radius:14px; padding:12px; margin:12px auto; max-width:620px; }
  .trayTitle{ font-size:16px; color:var(--title); margin:0 0 8px; }
  #drop{ min-height:60px; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; padding:10px; background:#fff; border:3px solid #93C5FD; border-radius:14px; }
  #pool{ min-height:60px; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; }
  #pool .dot{ cursor:grab; }
  .dragging{ opacity:.9; transform:scale(1.06); filter:saturate(1.1); }

  #feedback{ font-size:22px; font-weight:800; min-height:30px; margin-top:8px; }
  #stats{ font-size:18px; color:var(--blue2); font-weight:700; margin-top:8px; }

  @media (max-width:480px){
    #problem{ font-size:34px; }
    .dot{ width:26px; height:26px; }
  }
</style>
</head>

<nav style="margin-bottom:20px;">
  <a href="../index.html" style="margin:0 10px; color:#fff; text-decoration:none;">ğŸ  é¦–é </a>
  <a href="../DailyTask/" style="margin:0 10px; color:#fff; text-decoration:none;">ğŸ¯ æŠ½ä»»å‹™</a>
  <a href="../ZhuyinPractice/" style="margin:0 10px; color:#fff; text-decoration:none;">ğŸ”¤ æ³¨éŸ³ç·´ç¿’</a>
  <a href="../MathPractice/split-practice.html" style="margin:0 10px; color:#fff; text-decoration:none;">â• æ•¸å­¸åˆ†è§£</a>
</nav>


<body>
  <h1>æ•¸å­—åˆ†è§£ç·´ç¿’</h1>
  <div id="subtitle">ä¸€å¹´ç´šï½œ10 ä»¥å…§</div>

  <div id="toolbar">
    <button class="btn" id="checkBtn">âœ… ç¢ºèªç­”æ¡ˆ</button>
    <button class="btn btn-ghost" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
  </div>

  <div id="problem">â€”</div>
  <div id="knownRow"></div>

  <div class="tray" aria-label="æ‹–æ›³ç›®æ¨™å€">
    <div class="trayTitle">æŠŠåœ“é»æ‹–åˆ°é€™è£¡ âœ ç­”æ¡ˆæ¡†</div>
    <div id="drop"></div>
  </div>

  <div class="tray" aria-label="å¯ç”¨åœ“é»">
    <div class="trayTitle">å¯æ‹–æ›³çš„åœ“é»</div>
    <div id="pool"></div>
  </div>

  <div id="feedback"></div>
  <div id="stats">å®Œæˆé¡Œæ•¸ï¼š0ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š0</div>

<script>
  // ç‹€æ…‹
  let target=0, known=0, answer=0;
  let correctCount=0, wrongCount=0;

  // ç¯€é»
  const problem=document.getElementById('problem');
  const knownRow=document.getElementById('knownRow');
  const pool=document.getElementById('pool');
  const drop=document.getElementById('drop');
  const feedback=document.getElementById('feedback');
  const stats=document.getElementById('stats');
  const nextBtn=document.getElementById('nextBtn');
  const checkBtn=document.getElementById('checkBtn');

  // å·¥å…·
  const randInt=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
  const updateStats=()=>{ stats.textContent=`å®Œæˆé¡Œæ•¸ï¼š${correctCount}ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š${wrongCount}`; };

  // å‡ºé¡Œï¼š2~10ï¼Œé¡¯ç¤ºå·²çŸ¥æ•¸é‡çš„åœ“é»ï¼Œåªåœ¨ç­”æ¡ˆæ¡†æª¢æŸ¥æ•¸é‡
  function newQuestion(){
    feedback.textContent='';
    drop.innerHTML=''; pool.innerHTML=''; knownRow.innerHTML='';

    target=randInt(2,10);
    const a=randInt(1,target-1);
    known=Math.random()<0.5?a:target-a; // é¡Œé¢å·²çŸ¥
    answer=target-known;                // éœ€æ¹Šå‡ºçš„æ•¸

    const leftBox=Math.random()<0.5;
    problem.textContent = leftBox
      ? `${target} â†’ â˜ + ${known}`
      : `${target} â†’ ${known} + â˜`;

    for(let i=0;i<known;i++) knownRow.appendChild(makeDot(false));

    // æä¾›è¶³é‡å¯æ‹–æ›³åœ“é»ï¼ˆè‡³å°‘ 10 é¡†ï¼Œé¿å…ä¸å¤ ï¼‰
    const poolCount=Math.max(10, answer);
    for(let i=0;i<poolCount;i++) pool.appendChild(makeDot(true));
  }

  // ç”¢ç”Ÿåœ“é»
  function makeDot(draggable){
    const d=document.createElement('div');
    d.className='dot';
    if(!draggable) return d;

    let startX=0, startY=0, ghost=null;

    const onPointerDown=(e)=>{
      e.preventDefault();
      const rect=d.getBoundingClientRect();
      startX=e.clientX-rect.left; startY=e.clientY-rect.top;
      ghost=d.cloneNode(true);
      ghost.style.position='fixed';
      ghost.style.left=rect.left+'px';
      ghost.style.top=rect.top+'px';
      ghost.style.pointerEvents='none';
      ghost.classList.add('dragging');
      document.body.appendChild(ghost);
      document.addEventListener('pointermove', onMove);
      document.addEventListener('pointerup', onUp, {once:true});
    };
    const onMove=(e)=>{
      if(!ghost) return;
      ghost.style.left=(e.clientX-startX)+'px';
      ghost.style.top=(e.clientY-startY)+'px';
    };
    const onUp=(e)=>{
      document.removeEventListener('pointermove', onMove);
      if(!ghost) return;
      const r=drop.getBoundingClientRect();
      const x=e.clientX, y=e.clientY;
      const inDrop=(x>=r.left && x<=r.right && y>=r.top && y<=r.bottom);
      ghost.remove(); ghost=null;
      if(inDrop){ drop.appendChild(simpleDot()); }
    };

    d.addEventListener('pointerdown', onPointerDown);
    return d;
  }

  // æ”¾å…¥ç­”æ¡ˆæ¡†çš„åœ“é»ï¼šå¯é»æ“Šç§»å› pool
  function simpleDot(){
    const d=document.createElement('div');
    d.className='dot';
    d.style.cursor='pointer';
    d.title='é»ä¸€ä¸‹ç§»å›ä¸‹æ–¹åœ“é»å€';
    d.addEventListener('click', ()=>{ pool.appendChild(makeDot(true)); d.remove(); });
    return d;
  }

  function checkAnswer(){
    const count=drop.children.length;
    if(count===answer){
      feedback.style.color='var(--ok)';
      feedback.textContent='âœ… ç­”å°äº†ï¼';
      correctCount++; updateStats();
      setTimeout(newQuestion,1200);
    }else{
      feedback.style.color='var(--no)';
      feedback.textContent='âŒ å†è©¦ä¸€æ¬¡';
      wrongCount++; updateStats();
    }
  }

  nextBtn.addEventListener('click', newQuestion);
  checkBtn.addEventListener('click', checkAnswer);

  updateStats();
  newQuestion();
</script>
</body>
</html>
