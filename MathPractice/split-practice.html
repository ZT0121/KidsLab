<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ•¸å­—åˆ†è§£ç·´ç¿’ï½œKidsLab</title>

<link rel="stylesheet" href="../KidsLabTheme.css">
<link rel="preload" as="font" href="../BpmfIansui-Regular.ttf" type="font/ttf" crossorigin>

<style>
/* ç½®ä¸­èˆ‡æ¨£å¼ä¿®æ­£ç‰ˆ */
.center-wrap {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 14px;
  width: 100%;
}

/* å¤–æ¡†å®¹å™¨ */
.tray {
  border: 2px dashed #BFDBFE;
  border-radius: 14px;
  padding: 16px;
  margin: 16px auto;
  max-width: 680px;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* ç­”æ¡ˆæ¡†èˆ‡å¯æ‹–æ›³å€ */
#drop, #pool {
  min-height: 80px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 12px;
  border: 3px dashed #93C5FD;
  border-radius: 14px;
  background: transparent;
  width: 100%;
  box-sizing: border-box;
}

/* åœ“é» */
.dot {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #7C9CBF;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* å·²çŸ¥æ•¸å­—çš„åœ“é»åˆ—ç½®ä¸­ä¿®æ­£ */
#knownRow {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 12px auto;
  flex-wrap: wrap;
  width: 100%;
}

  
/* æ‹–æ›³ä¸­ */
.dragging {
  opacity: 0.9;
  transform: scale(1.06);
  filter: saturate(1.1);
}
</style>

</head>

<body>
  <nav class="top-nav light">
    <a href="../index.html">ğŸ  é¦–é </a>
    <a href="../DailyTask/">ğŸ¯ æ¯æ—¥ä»»å‹™</a>
    <a href="../ZhuyinPractice/">ã„…ã„†ã„‡ æ³¨éŸ³ç·´ç¿’</a>
    <a href="../MathPractice/split-practice.html" class="active">ğŸ”¢ æ•¸å­—åˆ†è§£ç·´ç¿’</a>
  </nav>

  <h1>ğŸ”¢ æ•¸å­—åˆ†è§£ç·´ç¿’</h1>
  <div id="subtitle">ä¸€å¹´ç´šï½œ10 ä»¥å…§</div>

  <div id="toolbar">
    <button class="btn" id="checkBtn">âœ… ç¢ºèªç­”æ¡ˆ</button>
    <button class="btn btn-ghost" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
  </div>

  <div id="problem">â€”</div>
  <div id="knownRow"></div>

  <div class="tray">
    <div class="trayTitle">æŠŠåœ“é»æ‹–åˆ°é€™è£¡ âœ ç­”æ¡ˆæ¡†</div>
    <div id="drop"></div>
  </div>

  <div class="tray">
    <div class="trayTitle">å¯æ‹–æ›³çš„åœ“é»</div>
    <div id="pool" class="center-wrap"></div>
  </div>

  <div id="feedback"></div>
  <div id="stats">å®Œæˆé¡Œæ•¸ï¼š0ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š0</div>

  <footer>Â© 2025 KidsLab Â· Created with â¤ï¸ by ZTing</footer>

<script>
let target=0, known=0, answer=0, correctCount=0, wrongCount=0;
const problem=document.getElementById('problem');
const knownRow=document.getElementById('knownRow');
const pool=document.getElementById('pool');
const drop=document.getElementById('drop');
const feedback=document.getElementById('feedback');
const stats=document.getElementById('stats');
const nextBtn=document.getElementById('nextBtn');
const checkBtn=document.getElementById('checkBtn');
const randInt=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
const updateStats=()=>{stats.textContent=`å®Œæˆé¡Œæ•¸ï¼š${correctCount}ã€€ï½œã€€ç­”éŒ¯æ¬¡æ•¸ï¼š${wrongCount}`;};

function newQuestion(){
  feedback.textContent=''; drop.innerHTML=''; pool.innerHTML=''; knownRow.innerHTML='';
  target=randInt(2,10); const a=randInt(1,target-1);
  known=Math.random()<0.5?a:target-a; answer=target-known;
  const leftBox=Math.random()<0.5;
  problem.textContent = leftBox ? `${target} â†’ â˜ + ${known}` : `${target} â†’ ${known} + â˜`;
  for(let i=0;i<known;i++) knownRow.appendChild(makeDot(false));
  const poolCount=Math.max(10, answer);
  for(let i=0;i<poolCount;i++) pool.appendChild(makeDot(true));
}

function makeDot(draggable){
  const d=document.createElement('div'); d.className='dot';
  if(!draggable) return d;
  let startX=0,startY=0,ghost=null;
  const onPointerDown=(e)=>{e.preventDefault();
    const rect=d.getBoundingClientRect();
    startX=e.clientX-rect.left;startY=e.clientY-rect.top;
    ghost=d.cloneNode(true);
    ghost.style.position='fixed';
    ghost.style.left=rect.left+'px';
    ghost.style.top=rect.top+'px';
    ghost.style.pointerEvents='none';
    ghost.classList.add('dragging');
    document.body.appendChild(ghost);
    document.addEventListener('pointermove',onMove);
    document.addEventListener('pointerup',onUp,{once:true});
  };
  const onMove=(e)=>{
    if(!ghost)return;
    ghost.style.left=(e.clientX-startX)+'px';
    ghost.style.top=(e.clientY-startY)+'px';
  };
  const onUp=(e)=>{
    document.removeEventListener('pointermove',onMove);
    if(!ghost)return;
    const r=drop.getBoundingClientRect();
    const x=e.clientX,y=e.clientY;
    const inDrop=(x>=r.left&&x<=r.right&&y>=r.top&&y<=r.bottom);
    ghost.remove();ghost=null;
    if(inDrop){drop.appendChild(simpleDot());}
  };
  d.addEventListener('pointerdown',onPointerDown);
  return d;
}

function simpleDot(){
  const d=document.createElement('div');
  d.className='dot';
  d.style.cursor='pointer';
  d.title='é»ä¸€ä¸‹ç§»å›ä¸‹æ–¹åœ“é»å€';
  d.addEventListener('click',()=>{pool.appendChild(makeDot(true));d.remove();});
  return d;
}

function checkAnswer(){
  const count=drop.children.length;
  if(count===answer){
    feedback.style.color='var(--ok)';
    feedback.textContent='âœ… ç­”å°äº†ï¼';
    correctCount++; updateStats();
    setTimeout(newQuestion,1200);
  }else{
    feedback.style.color='var(--no)';
    feedback.textContent='âŒ å†è©¦ä¸€æ¬¡';
    wrongCount++; updateStats();
  }
}

nextBtn.addEventListener('click',newQuestion);
checkBtn.addEventListener('click',checkAnswer);
updateStats(); newQuestion();
</script>
</body>
</html>
